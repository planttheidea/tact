'use strict';(function(k,m,r,p){k.module("tact.datepicker",[]);k.module("tact.datepicker").directive("tactDatepickerInput",[function(){return{compile:function(c,e){return{post:function(a,g,c,b){c.$observe("tactDatepickerInput",function(d){b.$modelValue&&a.format&&d!==a.format&&(a.format=d,b.$modelValue=new Date(b.$setViewValue))});b.$formatters.unshift(function(d){if(d)return moment(new Date(d)).format(a.format)});b.$parsers.unshift(function(a){if(a)return(a=/\d{4}-[01]\d-[0-3]/.test(a)?moment(a,
"YYYY-MM-DD"):moment(new Date(a)))&&a.isValid()?a.toDate():p})},pre:function(a,g,c,b){a.format=c.format||"MM/DD/YYYY"}}},controller:["$scope",function(c){}],controllerAs:"dtpckrInptCtrl",require:"^ngModel",restrict:"A"}}]);k.module("tact.datepicker").directive("tactDatepicker",[function(){return{compile:function(c,e){var a=c.find("input");(function(){for(var a=c.find("button"),e=a.length;e--;){var b=k.element(a[e]);if(b.parent().hasClass("datepicker-open-button"))return b}})();e.hasOwnProperty("inputId")&&
a.attr({id:e.inputId});e.hasOwnProperty("inputName")&&a.attr({name:e.inputName});return{post:function(a,c,b,d){a.$watch("model",function(b){b&&(a.currentMoment=moment(new Date(b)),a.datepickerMoment=moment(new Date(b)))});a.$watch("datepickerMoment",function(b){b||(a.datepickerMoment=moment(moment(new Date).format("YYYY-MM-DD"),"YYYY-MM-DD"));d.setDatepickerCalendar()},!0)},pre:function(a,c,b,d){b.hasOwnProperty("inputName")&&(a.name=b.inputName);d.element=c[0]}}},controller:["$scope","$timeout",
"$q","datepickerFactory",function(c,e,a,g){function l(){var a=k.element(m);a.off("click");e(function(){a.on("click",function(f){-1===g.getParents(f.target).indexOf(b.element)&&(c.isOpen=!1,e(function(){a.off("click")}))})})}var b=this;b.getDatepickerTitle=function(){return g.getDatepickerTitle(c.datepickerMoment)};b.openDatepicker=function(){c.isOpen=!0;l()};b.setDate=function(a){c.model=a.date;c.isOpen=!1};b.setDatepickerCalendar=function(){c.weeks=g.setDatepickerCalendar(c.datepickerMoment,c.currentMoment)};
b.setDatepickerDisplay=function(a,b){g["change"+a](c.datepickerMoment,b)};b.setWindowListener=l}],controllerAs:"dtpckrCtrl",restrict:"E",scope:{form:"=",format:"@?",model:"="},template:'<div data-datepicker><div data-input-group><input data-ng-class="{\'invalid\': !!form[name] && (!!form[name].$invalid && !!form[name].$dirty) || (!!form.$submitted && !!form[name].$invalid)}" data-ng-model="model" data-tact-datepicker-input="{{format}}" required type="text"> <span class="addon-button datepicker-open-button"><button type="button" data-ng-click="dtpckrCtrl.openDatepicker();"><span class="fa fa-calendar"><span data-screen-reader-only>Open the calendar datepicker</span></span></button></span></div><div data-dropdown data-ng-class="{\'open\': !!isOpen}"><div data-input-group class="flow"><span class="addon-button"><button type="button" data-ng-click="dtpckrCtrl.setDatepickerDisplay(\'Year\',false);"><span class="fa fa-arrow-left"><span data-screen-reader-only>Go to previous year</span></span> Y</button></span> <span class="addon-button"><button type="button" data-ng-click="dtpckrCtrl.setDatepickerDisplay(\'Month\',false);"><span class="fa fa-arrow-left"><span data-screen-reader-only>Go to previous month</span></span> M</button></span><h6 data-current-month class="text-center text-nowrap">{{dtpckrCtrl.getDatepickerTitle()}}</h6><span class="addon-button"><button type="button" data-ng-click="dtpckrCtrl.setDatepickerDisplay(\'Month\',true);">M <span class="fa fa-arrow-right"><span data-screen-reader-only>Go to next month</span></span></button></span> <span class="addon-button"><button type="button" data-ng-click="dtpckrCtrl.setDatepickerDisplay(\'Year\',true);">Y <span class="fa fa-arrow-right"><span data-screen-reader-only>Go to next year</span></span></button></span></div><table data-table="fill" class="flow"><thead><tr><th>Sun</th><th>Mon</th><th>Tue</th><th>Wed</th><th>Thu</th><th>Fri</th><th>Sat</th></tr></thead><tbody><tr data-ng-repeat="week in weeks"><td data-ng-repeat="day in week track by $index"><button class="small" data-ng-class="{\'secondary\': !!day.today, \'primary\': !!day.selected}" data-ng-click="dtpckrCtrl.setDate(day);" data-ng-if="!!day.date" type="button">{{day.text}}</button></td></tr></tbody></table></div></div>'}}]);
k.module("tact.datepicker").factory("datepickerFactory",[function(){function c(a){return a.daysInMonth()}function e(a){return moment(a).date(1).day()}return{changeMonth:function(a,c){return c?a.add(1,"M"):a.subtract(1,"M")},changeYear:function(a,c){return c?a.add(1,"y"):a.subtract(1,"y")},getDatepickerTitle:function(a){return a?a.format("MMMM YYYY"):""},getDaysInMonth:c,getFirstDayOfMonth:e,getParents:function(a){var c=[];for(a=a.parentNode;null!==a;)c.push(a),a=a.parentNode;return c},setDatepickerCalendar:function(a,
g){var l=c(a),b=e(a),d=[],f=[];if(b)for(var h=0;h<b;h++)f[f.length]={date:p,text:""};for(h=1;h<=l;h++){var m=h+b-1,n=moment(a).date(h),q=moment(moment().format("YYYY-MM-DD"),"YYYY-MM-DD");0===m%7&&f.length&&(d[d.length]=k.copy(f),f=[]);f[f.length]={date:n.toDate(),selected:g&&0===n.diff(g,"days"),text:h.toString(),today:0===n.diff(q,"days")};h===l&&(d[d.length]=f)}return k.copy(d)}}}])})(window.angular,window,document);
